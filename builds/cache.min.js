/*
 * Cache-js
 *
 * The MIT License
 */(function(){function g(a){var b=a.length,c=0;while(b--)c+=(c<<5)+a.charCodeAt(b);return Math.abs(c).toString(32)}function h(a,b){var c={},d=e(b),f=d.length,g;while(f--)g=d[f],c[g]=a&&a[g]?a[g]:b[g];return c}function i(a){return"string"==typeof a||"object"==typeof a&&"[object String]"===d.call(a)}function j(a){return"object"==typeof a&&"[object Object]"===d.call(a)}function k(a){this.opt=a,this.cache=[]}function l(a){var b;if(j(a.storage))b=a.storage;else if(i(a.storage))switch(a.storage){case"app":default:b=new k(a)}return b}function m(){function k(a,b){var c=!1,d=e[a];return d||(d=[],e[a]=d,c=!0),d.push(b),c}function m(a,b){var c=e[a],d;if(c){d=c.length;while(d--)c[d].apply(null,b)}e[a]=null}function n(){function h(){function b(b){m(f,a)}var a=c.call(arguments);j.set(f,a,b)}function i(b,c){b||!c?d.apply(null,a):m(f,c)}var a=c.call(arguments),e=a.pop(),f=g(b(a));k(f,e)&&(a.push(h),j.get(f,i))}var a=c.call(arguments),d=a.pop(),e={},i,j;return n.__proto__=d,n.clearCache=function(){j.clear()},d?(i=h(a.pop(),f),j=l(i),n):null}"use strict";var a=window,b=JSON.stringify,c=Array.prototype.slice,d=Object.prototype.toString,e=Object.keys,f={storage:"app",expire:31536e6,max:10};k.prototype._delExpire=function(a){var b=!1,c=this.cache,d=c.length,e=Date.now(),f;while(d--){f=c[d];if(e>f.expire||a===f.key)c.splice(d,1),b=!0}return b},k.prototype.get=function(a,b){var c,d=Date.now(),e=this.cache,f=e.length,g;while(f--){g=e[f];if(g.key===a){c=g;break}}c&&d>c.expire&&(e.splice(f,1),c=null),b(null,c?c.val:null)},k.prototype.set=function(a,b,c){var d=this.cache,e=this.opt.max,f={key:a,expire:Date.now()+this.opt.expire,val:b},g=d.length;g<e?d.push(f):g>=e&&this._delExpire(a)?d.push(f):g>=e&&(d.shift(),d.push(f)),c(null)},k.prototype.clear=function(){this.cache=[]},a.cache=m})();